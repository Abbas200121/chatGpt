{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{motion}from\"framer-motion\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const botName=\"Chatbot\";const Chatbot=()=>{const[messages,setMessages]=useState([]);const[userMessage,setUserMessage]=useState(\"\");const messagesEndRef=useRef(null);useEffect(()=>{var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});},[messages]);const handleSend=async()=>{if(!userMessage.trim())return;const token=localStorage.getItem(\"token\");// Get token from local storage\ntry{const response=await fetch(\"http://localhost:8000/message\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"Authorization\":`Bearer ${token}`// Attach token\n},body:JSON.stringify({content:userMessage})});if(response.status===401){throw new Error(\"Unauthorized: Please log in again.\");}const data=await response.json();setMessages(prev=>[...prev,{text:data.response,isUser:false}]);}catch(error){setMessages(prev=>[...prev,{text:`Error: ${error.message}`,isUser:false}]);}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-lg w-full bg-gray-800 p-6 rounded-lg shadow-lg\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-center text-2xl font-bold mb-4\",children:[\"Chat with \",botName]}),/*#__PURE__*/_jsxs(\"div\",{className:\"h-96 overflow-y-auto p-4 space-y-4 bg-gray-700 rounded-lg\",children:[messages.map((msg,index)=>/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,x:msg.isUser?50:-50},animate:{opacity:1,x:0},transition:{duration:0.3},className:`p-3 rounded-lg max-w-xs ${msg.isUser?\"bg-blue-500 text-white ml-auto\":\"bg-gray-600 text-white\"}`,children:[/*#__PURE__*/_jsxs(\"strong\",{children:[msg.isUser?\"You\":botName,\":\"]}),\" \",msg.text]},index)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mt-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userMessage,onChange:e=>setUserMessage(e.target.value),onKeyDown:e=>e.key===\"Enter\"&&handleSend(),placeholder:\"Type your message...\",className:\"flex-1 p-3 text-white bg-gray-700 rounded-lg outline-none\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,className:\"ml-2 p-2 bg-blue-500 rounded-full text-white\",children:\"Send\"})]})]})});};export default Chatbot;","map":{"version":3,"names":["React","useState","useEffect","useRef","motion","jsxs","_jsxs","jsx","_jsx","botName","Chatbot","messages","setMessages","userMessage","setUserMessage","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","trim","token","localStorage","getItem","response","fetch","method","headers","body","JSON","stringify","content","status","Error","data","json","prev","text","isUser","error","message","className","children","map","msg","index","div","initial","opacity","x","animate","transition","duration","ref","type","value","onChange","e","target","onKeyDown","key","placeholder","onClick"],"sources":["C:/Users/moham/message-app/src/pages/Chatbot.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\n\r\nconst botName = \"Chatbot\";\r\n\r\nconst Chatbot = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [userMessage, setUserMessage] = useState(\"\");\r\n  const messagesEndRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\r\n  }, [messages]);\r\n\r\n  const handleSend = async () => {\r\n    if (!userMessage.trim()) return;\r\n  \r\n    const token = localStorage.getItem(\"token\"); // Get token from local storage\r\n  \r\n    try {\r\n      const response = await fetch(\"http://localhost:8000/message\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"Authorization\": `Bearer ${token}`, // Attach token\r\n        },\r\n        body: JSON.stringify({ content: userMessage }),\r\n      });\r\n\r\n      if (response.status === 401) {\r\n        throw new Error(\"Unauthorized: Please log in again.\");\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMessages((prev) => [...prev, { text: data.response, isUser: false }]);\r\n    } catch (error) {\r\n      setMessages((prev) => [...prev, { text: `Error: ${error.message}`, isUser: false }]);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-screen bg-gray-900 text-white p-4\">\r\n      <div className=\"max-w-lg w-full bg-gray-800 p-6 rounded-lg shadow-lg\">\r\n        <h2 className=\"text-center text-2xl font-bold mb-4\">Chat with {botName}</h2>\r\n        <div className=\"h-96 overflow-y-auto p-4 space-y-4 bg-gray-700 rounded-lg\">\r\n          {messages.map((msg, index) => (\r\n            <motion.div\r\n              key={index}\r\n              initial={{ opacity: 0, x: msg.isUser ? 50 : -50 }}\r\n              animate={{ opacity: 1, x: 0 }}\r\n              transition={{ duration: 0.3 }}\r\n              className={`p-3 rounded-lg max-w-xs ${\r\n                msg.isUser ? \"bg-blue-500 text-white ml-auto\" : \"bg-gray-600 text-white\"\r\n              }`}\r\n            >\r\n              <strong>{msg.isUser ? \"You\" : botName}:</strong> {msg.text}\r\n            </motion.div>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n\r\n        <div className=\"flex items-center mt-4\">\r\n          <input\r\n            type=\"text\"\r\n            value={userMessage}\r\n            onChange={(e) => setUserMessage(e.target.value)}\r\n            onKeyDown={(e) => e.key === \"Enter\" && handleSend()}\r\n            placeholder=\"Type your message...\"\r\n            className=\"flex-1 p-3 text-white bg-gray-700 rounded-lg outline-none\"\r\n          />\r\n          <button onClick={handleSend} className=\"ml-2 p-2 bg-blue-500 rounded-full text-white\">\r\n            Send\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chatbot;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAC1D,OAASC,MAAM,KAAQ,eAAe,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAEvC,KAAM,CAAAC,OAAO,CAAG,SAAS,CAEzB,KAAM,CAAAC,OAAO,CAAGA,CAAA,GAAM,CACpB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGX,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACY,WAAW,CAAEC,cAAc,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAClD,KAAM,CAAAc,cAAc,CAAGZ,MAAM,CAAC,IAAI,CAAC,CAEnCD,SAAS,CAAC,IAAM,KAAAc,qBAAA,CACd,CAAAA,qBAAA,CAAAD,cAAc,CAACE,OAAO,UAAAD,qBAAA,iBAAtBA,qBAAA,CAAwBE,cAAc,CAAC,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAAC,CAChE,CAAC,CAAE,CAACR,QAAQ,CAAC,CAAC,CAEd,KAAM,CAAAS,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CAACP,WAAW,CAACQ,IAAI,CAAC,CAAC,CAAE,OAEzB,KAAM,CAAAC,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAE7C,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,+BAA+B,CAAE,CAC5DC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAkB,CAClC,eAAe,CAAE,UAAUN,KAAK,EAAI;AACtC,CAAC,CACDO,IAAI,CAAEC,IAAI,CAACC,SAAS,CAAC,CAAEC,OAAO,CAAEnB,WAAY,CAAC,CAC/C,CAAC,CAAC,CAEF,GAAIY,QAAQ,CAACQ,MAAM,GAAK,GAAG,CAAE,CAC3B,KAAM,IAAI,CAAAC,KAAK,CAAC,oCAAoC,CAAC,CACvD,CAEA,KAAM,CAAAC,IAAI,CAAG,KAAM,CAAAV,QAAQ,CAACW,IAAI,CAAC,CAAC,CAClCxB,WAAW,CAAEyB,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAE,CAAEC,IAAI,CAAEH,IAAI,CAACV,QAAQ,CAAEc,MAAM,CAAE,KAAM,CAAC,CAAC,CAAC,CAC1E,CAAE,MAAOC,KAAK,CAAE,CACd5B,WAAW,CAAEyB,IAAI,EAAK,CAAC,GAAGA,IAAI,CAAE,CAAEC,IAAI,CAAE,UAAUE,KAAK,CAACC,OAAO,EAAE,CAAEF,MAAM,CAAE,KAAM,CAAC,CAAC,CAAC,CACtF,CACF,CAAC,CAED,mBACE/B,IAAA,QAAKkC,SAAS,CAAC,mFAAmF,CAAAC,QAAA,cAChGrC,KAAA,QAAKoC,SAAS,CAAC,sDAAsD,CAAAC,QAAA,eACnErC,KAAA,OAAIoC,SAAS,CAAC,qCAAqC,CAAAC,QAAA,EAAC,YAAU,CAAClC,OAAO,EAAK,CAAC,cAC5EH,KAAA,QAAKoC,SAAS,CAAC,2DAA2D,CAAAC,QAAA,EACvEhC,QAAQ,CAACiC,GAAG,CAAC,CAACC,GAAG,CAAEC,KAAK,gBACvBxC,KAAA,CAACF,MAAM,CAAC2C,GAAG,EAETC,OAAO,CAAE,CAAEC,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAEL,GAAG,CAACN,MAAM,CAAG,EAAE,CAAG,CAAC,EAAG,CAAE,CAClDY,OAAO,CAAE,CAAEF,OAAO,CAAE,CAAC,CAAEC,CAAC,CAAE,CAAE,CAAE,CAC9BE,UAAU,CAAE,CAAEC,QAAQ,CAAE,GAAI,CAAE,CAC9BX,SAAS,CAAE,2BACTG,GAAG,CAACN,MAAM,CAAG,gCAAgC,CAAG,wBAAwB,EACvE,CAAAI,QAAA,eAEHrC,KAAA,WAAAqC,QAAA,EAASE,GAAG,CAACN,MAAM,CAAG,KAAK,CAAG9B,OAAO,CAAC,GAAC,EAAQ,CAAC,IAAC,CAACoC,GAAG,CAACP,IAAI,GARrDQ,KASK,CACb,CAAC,cACFtC,IAAA,QAAK8C,GAAG,CAAEvC,cAAe,CAAE,CAAC,EACzB,CAAC,cAENT,KAAA,QAAKoC,SAAS,CAAC,wBAAwB,CAAAC,QAAA,eACrCnC,IAAA,UACE+C,IAAI,CAAC,MAAM,CACXC,KAAK,CAAE3C,WAAY,CACnB4C,QAAQ,CAAGC,CAAC,EAAK5C,cAAc,CAAC4C,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAChDI,SAAS,CAAGF,CAAC,EAAKA,CAAC,CAACG,GAAG,GAAK,OAAO,EAAIzC,UAAU,CAAC,CAAE,CACpD0C,WAAW,CAAC,sBAAsB,CAClCpB,SAAS,CAAC,2DAA2D,CACtE,CAAC,cACFlC,IAAA,WAAQuD,OAAO,CAAE3C,UAAW,CAACsB,SAAS,CAAC,8CAA8C,CAAAC,QAAA,CAAC,MAEtF,CAAQ,CAAC,EACN,CAAC,EACH,CAAC,CACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAjC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}